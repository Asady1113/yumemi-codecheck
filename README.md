# コードチェック回答

## アプリ概要
Gitのリポジトリ検索アプリ（課題に忠実なもの）

・検索画面：検索ワードを入れると、リポジトリのリストが表示される。

・詳細画面：リポジトリの詳細が表示される。

・お気に入り登録機能（未完成）：リポジトリのお気に入り登録機能の実装を試みたが、時間的に最後まで実装できなかった。Mainにマージはしておらず、issue8-1のブランチに保存されている（詳細は以下）。



## 使用ライブラリ
### [KRProgressHUD](https://github.com/krimpedance/KRProgressHUD)

インストール方法（Podファイルに以下の一文を追加）

```
pod 'KRProgressHUD'
```

ロード中の画面固定、エラー表示のために使用した。




## 課題の概要と苦労したポイント（issueのコメントにも記入済み）
### 課題1 ソースコードの可読性
#### 命名規則
・ファイル名の変更

  ViewController →RootViewController
  
  ViewController2 →DetailViewController

・変数名の変更

  初見でわかりやすいように、省略は基本的に正式表記に修正。しかし、省略した方がタイピングが早いからなどの理由もありそうで、直すか迷った（特にrepoなど）。予測変換機能を使えば、長さは負担にならないと最終的に判断。
  
  
  
#### ネスト、インデント
・URLSessionTask部分のネストが深かったため、関数を分離。

・関数内のインデントを修正（特にif文付近）。



#### コメント、スペースと改行
・必要最低限のコメントを追加。多過ぎると邪魔になると判断。

・見えづらい箇所に改行、スペースを追加。



## ソースコードの安定性
・KRProgressHUDの導入。

　背景：検索ボタンを連打した際にエラーが出現。理由はロード中に検索ボタンを連打することによる、配列の作成が間に合っていないことだと判断。HUDで画面を固定することで、検索ボタンの連打を回避。
 
・そのほか、暗黙的アンラップ、強制ダウンキャストに危険性がないか確認。



## バグの修正
### レイアウトエラー
・詳細画面のオートレイアウトの組み直し。長いタイトルの場合、TitleLabelに入り切らなかったため、コードで指定（label.adjustsFontSizeToFitWidth = true）

### メモリリーク、パースエラー
・このアプリ内では発生していないと判断した。見落としている可能性も十分あるが、知識が不十分であり発見に至らなかった。

・[メモリリーク参考記事](https://dev.classmethod.jp/articles/ios-memory-leak-check-and-prevent-190508/)
 
 
 
 ## Fat VC の回避、アーキテクチャを適用
・自分なりにMVCを実装。しかし、大きく可読性が下がっており、引数が多く安全性も欠けている気がする。issue6をmergeする前がMVC実装前。

・[MVC参考記事](https://zenn.dev/tanukidevelop/articles/33eedf516abb1e)




 ## プログラム構造をリファクタリング
・CQS原則：ownerの画像を取得する関数で、URLSessionTaskを変数宣言することで、処理を小分けした。

・そのほか、原則に基づいて細かな修正を入れた。しかし、そもそもの知識がなかったため、インプットにかなりの時間を要すこととなった。

・参考記事: [DRY原則](https://qiita.com/Koki_jp/items/d5f1b5f277b581888a1f),
 [単一責任の原則](https://zenn.dev/k_koheyi/articles/019b6a87bc3ad15895fb)
  
 
 ## テストの追加
 ・テストの作成ができなかった。理由としては、テストが書きやすいコード設計でなかったことが挙げられると思う（依存関係が多い）。改善を試みたが、時間切れになった。
 
 
 
 ## 新機能の追加
 ・お気に入り登録画面の追加を試みた。時間切れにより実装完了とはならなかったが、issue8-1のブランチに途中経過が残っている（マージはしていない）
 
 　・機能の詳細：リポジトリを検索し、良いと思ったものをお気に入り登録し、一覧で見れる機能
 　・機能の目的：検索した中で、気になるリポジトリがあった際、すぐに見られる状態にすること
　 ・想定していた実装方法：Realmを使用。お気に入り登録したリポジトリをRealmに保存し、配列化したものを一覧画面でTableViewに表示する想定


 
 ## そのほか
 ・TableViewをスクロールしたらキーボードが閉じる設定
 ・検索バーをタッチするたびに、ワードが全て消える機能は削除
 ・検索バーに入力する際、文頭が大文字になるバグを改善
 
